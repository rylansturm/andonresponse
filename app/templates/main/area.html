{% extends "base.html" %}

{% block app_content %}
    <table>
        <tr valign="top">
            <td><h1>Area: {{ area.name }}</h1></td>
        </tr>
    </table>
    {% if current_user in area.users %}
    <p>You can edit stuff here!</p>
    {% endif %}
    <hr>
    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th scope="col">Shift</th>
            <th scope="col">Monday</th>
            <th scope="col">Tuesday</th>
            <th scope="col">Wednesday</th>
            <th scope="col">Thursday</th>
            <th scope="col">Friday</th>
            <th scope="col">Saturday</th>
        </tr>
        </thead>
        <tbody>
        {% for shift in area.shifts %}
            <tr>
                <th scope="row">{{ shift.name }}</th>
                {% for day in week.get_dates_list() %}
                    {% if area.kpi.filter(KPI.d==day, KPI.shift==shift).first() %}
                    <td>
                        <a href="{{ url_for('main.create_kpi', area_name=area.name, shift=shift.name, date=day) }}">
                                {{ area.kpi.filter(KPI.d==day, KPI.shift==shift).first().demand }}
                        </a>
                    </td>
                    {% else %}
                    <td>
                        <a href="{{ url_for('main.create_kpi', area_name=area.name, shift=shift.name, date=day) }}">
                            Add
                        </a>
                    </td>
                    {% endif %}
                {% endfor %}
        {% endfor %}
            </tr>
        </tbody>
    </table>
{% endblock %}
